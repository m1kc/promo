# YepScript

JS с преферансом и гейшами.


## Основные идеи

* Синтаксис и большая часть идей CoffeeScript.
* Компилируется в нативный код через LLVM.
* Слабая типизация (но более сильная, чем в JS: не всё приводится ко всему).
* Опциональная строгая типизация (с ней код будет оптимальнее).
* Перегрузка операторов.


## Типы данных


### Boolean

Да.


### Number

Число произвольной вместимости. Внутри бывает Integer и Float, при необходимости конвертируется из одного в другое. Умеет всю обычную арифметику. Приводится к Boolean по правилу: если 0, то false, иначе true.


### Array

Массив чего угодно. Сложение означает конкатенацию. Может быть типизированным, тогда элемент не того типа добавить не получится.


### String

Строка. При сложении с большинством типов тоже приводит их к строке (но не массивы: `[2, 4] + 'string' == [2, 4, 'string']`). Можно умножать: если умножить `жаба` на 2, получится `жабажаба`.


## Hello, world

```coffeescript
main = (String[] args) ->
	console.log 'Hello, world!'
```

Если `main` не объявлена, просто исполняем всё подряд:

```coffeescript
console.log 'Hello, world!'
```

Если `main` возвращает строку, она выводится на экран:

```coffeescript
'Hello, world!'
```

Если число - это код возврата. Если что-нибудь ещё - игнорируется.


## Интерполяция

```coffeescript
console.log "2+2 = #{2+2}"  # 2+2 = 4
```

Но можно и лучше:

```coffeescript
console.log "#{{2+2}}"    # 2+2 = 4
console.log "#{{2 + 2}}"  # 2 + 2 = 4
```


## Передача по ссылке и по значению

По умолчанию числа, булеаны передаются по значению, а массивы и объекты - по ссылке. Но можно задать явно.

Если переменная куда-нибудь передаётся по ссылке, она хранится в куче. Если нет - на стеке или в регистре.

### По ссылке

```coffeescript
addOne = (Integer& x) ->
	x++

z = 5
console.log z  # 5
addOne z
console.log z  # 6
```

### По значению

```coffeescript
addOne = (Integer% x) ->
	x++

z = 5
console.log z  # 5
addOne z
console.log z  # 5
```
